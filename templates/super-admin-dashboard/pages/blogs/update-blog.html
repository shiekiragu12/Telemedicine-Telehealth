{% extends './../../base.html' %}
{% load static %}
{% load customtags %}
{% block title %} Blogs Admin - Update - {{blog.title}} {% endblock %}
{% load customtags %}

{% block styles %}
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
<link href="{% static 'superadmin/assets/plugins/select2/css/select2.min.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col">
            <div class="page-description">
                <h1>{{blog.title}}</h1>
            </div>
        </div>
    </div>
    <div>
        <form action="" class="form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group mb-3">
                <label for="title" class="form-label">Blog Title</label>
                <input type="text" name="title" value="{{blog.title}}" required class="form-control shadow-none" id="title">
            </div>
            <div class="form-group mb-3">
                <label for="tags" class="form-label">Blog Tags</label>
                <select class="js-states form-control" name="tags" id="tags" tabindex="-1" multiple
                    style="display: none; width: 100%">
                   {% for tag in tags %}
                   <option value="{{tag.id}}" {% if tag in blog.tags.all %} selected {% endif %} >{{tag.name}}</option>
                   {% endfor %}
                </select>
            </div>
            <div class="form-group mb-3">
                <label for="tags" class="form-label">Blog Topic</label>
                <select class="js-states form-control" name="topic" id="topic" tabindex="-1"
                    style="display: none; width: 100%">
                   {% for topic in 'topics'|topics %}
                   <option value="{{topic.id}}" {% if blog.topic.id == topic.id %} selected {% endif %} >{{topic.title}}</option>
                   {% endfor %}
                </select>
            </div>
            <div class="form-group mb-3">
                <label for="blog" class="form-label">Write the Blog</label>
                <textarea name="body" id="blog" required rows="30">{{blog.body}}</textarea>
            </div>
            <div class="form-group mb-3">
                <label for="blog" class="form-label">
                    Blog Image
                    <small>
                        Current: 
                        {% if blog.image %}
                        <a href="{{blog.image.url}}" target="_blank" referrerpolicy="noreferrer">Preview on new Tab</a>
                        {% else %}
                        Image not set
                        {% endif %}
                    </small>
                </label>
                <input type="file" accept="image/*" class="form-control shadow-none" name="image">
            </div>

            <div class="form-check form-switch mb-3">
                <input class="form-check-input" name="is_public" type="checkbox" role="switch" id="flexSwitchCheckChecked" {% if blog.is_public %} checked {% endif %}>
                <label class="form-check-label" for="flexSwitchCheckChecked">Make the Blog Public</label>
            </div>

            <div class="col-12">
                <button type="submit" class="btn btn-primary">Update Blog</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
 
<script src="{% static 'superadmin/assets/plugins/summernote/summernote-lite.min.js' %}"></script>
<script src="{% static 'superadmin/assets/plugins/select2/js/select2.full.min.js' %}"></script>
<script>
    $(document).ready(function () {
        $('#tags').select2();
        $('#topic').select2();
        $('#blog').summernote({
            height: 600,

        });
    });
</script>
{% endblock %}